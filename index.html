<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xiaomi Pad 6 Custom ROMs | pipa</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Additional CSS for new sections - keeping original theme */
        .search-container {
            margin-bottom: 2rem;
        }

        .search-bar {
            position: relative;
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            background: white;
            border: 2px solid #ff6b35;
            border-radius: 25px;
            padding: 12px 20px;
        }

        .search-bar i {
            color: #ff6b35;
            margin-right: 10px;
        }

        .search-bar input {
            flex: 1;
            background: none;
            border: none;
            color: #333;
            font-size: 16px;
            outline: none;
        }

        .search-bar input::placeholder {
            color: #666;
        }

        .clear-search {
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            padding: 5px;
            display: none;
        }

        .clear-search:hover {
            color: #ff6b35;
        }

        .clear-search.show {
            display: block;
        }

        .donate-text {
            text-align: center;
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .donate-subtext {
            text-align: center;
            color: #666;
            margin-bottom: 2rem;
        }

        .donate-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .donate-card {
            background: white;
            border: 2px solid #ff6b35;
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .donate-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.2);
        }

        .donate-card i {
            font-size: 3rem;
            color: #ff6b35;
            margin-bottom: 1rem;
        }

        .donate-card h3 {
            color: #333;
            margin-bottom: 0.5rem;
        }

        .donate-card p {
            color: #666;
            margin-bottom: 1.5rem;
        }

        .donate-btn {
            background: #ff6b35;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .donate-btn:hover {
            background: #e55a2b;
            transform: translateY(-2px);
        }

        /* Search results styling */
        .no-results {
            text-align: center;
            padding: 2rem;
            color: #666;
            font-style: italic;
        }

        .search-results-count {
            text-align: center;
            margin-bottom: 1rem;
            color: #666;
            font-size: 0.9rem;
        }

        /* Hide items that don't match search */
        .rom-card.hidden,
        .kernel-card.hidden,
        .recovery-card.hidden,
        .rom-card.search-hidden,
        .kernel-card.search-hidden,
        .recovery-card.search-hidden {
            display: none;
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <nav>
                <div class="logo">
                    <i class="fas fa-tablet-alt"></i>
                    <span>Xiaomi Pad 6 ROMs</span>
                </div>

                <!-- Mobile hamburger -->
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>

                <ul class="nav-links">
                    <li><a href="#overview">Overview</a></li>
                    <li><a href="#roms">ROMs</a></li>
                    <li><a href="#kernels">Kernels</a></li>
                    <li><a href="#recoveries">Recoveries</a></li>
                    <li><a href="#donate">Support</a></li>
                    <li><a href="#community">Community</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <section class="hero">
            <div class="hero-content">
                <h1>Xiaomi Pad 6</h1>
                <p class="tagline">Unlock the Full Potential of Your Device with Custom ROMs.</p>
                <a href="#roms" class="btn">Explore ROMs</a>
            </div>
            <div class="hero-image">
                <img src="assets/images/Pad6.png" alt="Xiaomi Pad 6">
            </div>
        </section>

        <section id="overview">
            <h2 class="section-title">Device Overview</h2>
            <div class="specs">
                <div class="spec-grid">
                    <div class="spec-item"><i class="fas fa-microchip"></i><h3>Processor</h3><p>Snapdragon 870</p></div>
                    <div class="spec-item"><i class="fas fa-memory"></i><h3>RAM</h3><p>6/8 GB LPDDR5</p></div>
                    <div class="spec-item"><i class="fas fa-expand"></i><h3>Display</h3><p>11" 144Hz WQHD+</p></div>
                    <div class="spec-item"><i class="fas fa-hdd"></i><h3>Storage</h3><p>128/256 GB UFS 3.1</p></div>
                    <div class="spec-item"><i class="fas fa-battery-full"></i><h3>Battery</h3><p>8840 mAh</p></div>
                </div>
            </div>
        </section>

        <section id="benefits">
            <h2 class="section-title">Why Custom ROMs?</h2>
            <div class="benefits">
                <div class="benefit-card"><i class="fas fa-tachometer-alt"></i><h3>Improved Performance</h3><p>Optimized for a smoother, faster experience compared to stock firmware.</p></div>
                <div class="benefit-card"><i class="fas fa-battery-three-quarters"></i><h3>Longer Battery Life</h3><p>Better resource management and no bloatware for significant battery gains.</p></div>
                <div class="benefit-card"><i class="fas fa-sparkles"></i><h3>Latest Android Features</h3><p>Get the newest Android versions and features without waiting for official updates.</p></div>
            </div>
        </section>

        <section id="roms">
            <h2 class="section-title">Available ROMs</h2>
            
            <!-- ROM Search Bar -->
            <div class="search-container">
                <div class="search-bar">
                    <i class="fas fa-search"></i>
                    <input type="text" id="rom-search" placeholder="Search ROMs, kernels, recoveries by name, developer, or Android version...">
                    <button class="clear-search" id="clear-search">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Search results counter -->
            <div id="search-results-count" class="search-results-count"></div>
            
            <!-- Filter Controls: removed "All" button per request -->
            <div class="filter-controls">
                <button class="filter-btn active" data-filter="Android 16">Android 16</button>
                <button class="filter-btn" data-filter="Android 15">Android 15</button>
            </div>

            <div class="roms-container">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Loading ROMs...
                </div>
            </div>
        </section>

        <!-- New Kernels section (cards will be injected here) -->
        <section id="kernels">
            <h2 class="section-title">Kernels</h2>
            <div class="kernels-container">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Loading Kernels...
                </div>
            </div>
        </section>

        <!-- New Recoveries section -->
        <section id="recoveries">
            <h2 class="section-title">Recoveries</h2>
            <div class="recoveries-container">
                <div class="loading">
                    <i class="fas fa-spinner fa-spin"></i> Loading Recoveries...
                </div>
            </div>
        </section>

        <!-- Donate/Support Section -->
        <section id="donate">
            <h2 class="section-title">Support Our Work</h2>
            <p class="donate-text">Your support helps us maintain and improve this ROM repository for the community.</p>
            <p class="donate-subtext">Every contribution makes a difference in keeping this project alive and updated.</p>
            <div class="donate-options">
                <div class="donate-card">
                    <i class="fas fa-mobile-alt"></i>
                    <h3>UPI Payment</h3>
                    <p>Quick and easy payment via UPI</p>
                    <button class="donate-btn" id="upi-donate">Donate via UPI</button>
                </div>
                <div class="donate-card">
                    <i class="fas fa-coffee"></i>
                    <h3>Buy Me a Coffee</h3>
                    <p>Support with a coffee donation</p>
                    <button class="donate-btn" id="coffee-donate">Buy Coffee</button>
                </div>
                <div class="donate-card">
                    <i class="fab fa-paypal"></i>
                    <h3>PayPal</h3>
                    <p>Secure donation via PayPal</p>
                    <button class="donate-btn" id="paypal-donate">Donate PayPal</button>
                </div>
            </div>
        </section>

        <section id="community">
            <h2 class="section-title">Join Our Community</h2>
            <div class="community-grid">
                <div class="community-card"><i class="fab fa-telegram"></i><h3>The Usual Suspects</h3><a href="https://t.me/the_usual_suspects_777" target="_blank">Join Channel</a></div>
                <div class="community-card"><i class="fab fa-telegram"></i><h3>PAD6 Repo</h3><a href="https://t.me/PAD6Repo" target="_blank">Join Channel</a></div>
                <div class="community-card"><i class="fab fa-telegram"></i><h3>Xiaomi Pad 6 Global</h3><a href="https://t.me/XiaomiPad6Global" target="_blank">Join Group</a></div>
                <div class="community-card"><i class="fab fa-telegram"></i><h3>Mi Pad 6</h3><a href="https://t.me/mipad6" target="_blank">Join Group</a></div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container footer-content">
            <div class="footer-section">
                <h3>Important Notes</h3>
                <p>Installing custom ROMs may void your warranty. Always back up your data before proceeding. You are responsible for any changes to your device.</p>
            </div>
            <!-- Resources section was removed as requested -->
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Xiaomi Pad 6 Custom ROMs | Designed for pipa</p>
            <p class="credits">Webpage by <a href="https://t.me/SCARFACEE_01" target="_blank">Mufasa</a> & <a href="https://glitchwraith.vercel.app/" target="_blank">Glitch Wraith</a></p>
        </div>
    </footer>

    <script src="js/index.js"></script>
    <script>
        // Global search functionality
        let allItems = []; // Will store all ROM, kernel, and recovery items
        let originalHTML = {}; // Store original HTML content for highlighting

        // Initialize search when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Wait a bit for the main script to load the data
            setTimeout(collectAllItems, 1000);
        });

        function collectAllItems() {
            allItems = [];
            
            // Collect ROM cards
            const romCards = document.querySelectorAll('.rom-card');
            romCards.forEach(card => {
                allItems.push({
                    element: card,
                    type: 'rom',
                    searchableText: getSearchableText(card)
                });
            });

            // Collect Kernel cards
            const kernelCards = document.querySelectorAll('.kernel-card');
            kernelCards.forEach(card => {
                allItems.push({
                    element: card,
                    type: 'kernel',
                    searchableText: getSearchableText(card)
                });
            });

            // Collect Recovery cards
            const recoveryCards = document.querySelectorAll('.recovery-card');
            recoveryCards.forEach(card => {
                allItems.push({
                    element: card,
                    type: 'recovery',
                    searchableText: getSearchableText(card)
                });
            });
        }

        function getSearchableText(card) {
            // Extract all text content for searching
            const title = card.querySelector('h3')?.textContent || '';
            const developer = card.querySelector('.developer')?.textContent || '';
            const androidVersion = card.querySelector('.android-version')?.textContent || '';
            const description = card.querySelector('p')?.textContent || '';
            const maintainer = card.querySelector('.maintainer')?.textContent || '';
            
            return `${title} ${developer} ${androidVersion} ${description} ${maintainer}`.toLowerCase();
        }

        function storeOriginalHTML() {
            allItems.forEach((item, index) => {
                originalHTML[index] = item.element.innerHTML;
            });
        }

        // Search functionality
        document.getElementById('rom-search').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase().trim();
            const clearBtn = document.getElementById('clear-search');
            
            // Show/hide clear button
            if (searchTerm) {
                clearBtn.classList.add('show');
            } else {
                clearBtn.classList.remove('show');
            }
            
            performSearch(searchTerm);
        });

        document.getElementById('clear-search').addEventListener('click', function() {
            const searchInput = document.getElementById('rom-search');
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            searchInput.value = '';
            this.classList.remove('show');
            
            // Re-enable filter buttons
            filterBtns.forEach(btn => btn.style.opacity = '1');
            
            performSearch('');
            searchInput.focus();
        });

        function performSearch(searchTerm) {
            let visibleCount = 0;
            const resultsCounter = document.getElementById('search-results-count');
            const filterBtns = document.querySelectorAll('.filter-btn');
            
            if (!searchTerm) {
                // Show all items and restore filter functionality
                allItems.forEach((item) => {
                    item.element.classList.remove('hidden', 'search-hidden');
                });
                resultsCounter.textContent = '';
                
                // Re-apply current filter if any
                const activeFilter = document.querySelector('.filter-btn.active');
                if (activeFilter) {
                    applyFilter(activeFilter.getAttribute('data-filter'));
                }
                return;
            }

            // Re-collect items in case new ones were loaded
            collectAllItems();

            // When searching, disable filter buttons and show all matching items regardless of filter
            filterBtns.forEach(btn => btn.style.opacity = '0.5');

            allItems.forEach((item) => {
                const matches = item.searchableText.includes(searchTerm);
                
                if (matches) {
                    // Remove both hidden classes to show item regardless of current filter
                    item.element.classList.remove('hidden', 'search-hidden');
                    visibleCount++;
                } else {
                    // Add search-hidden class to hide non-matching items
                    item.element.classList.add('search-hidden');
                    item.element.classList.remove('hidden'); // Remove filter hidden
                }
            });

            // Update results counter
            if (visibleCount === 0) {
                resultsCounter.textContent = 'No results found';
                resultsCounter.style.color = '#ff6b35';
            } else {
                resultsCounter.textContent = `Found ${visibleCount} result${visibleCount > 1 ? 's' : ''} (showing all categories)`;
                resultsCounter.style.color = '#666';
            }
        }

        // Function to apply filter (when not searching)
        function applyFilter(filterValue) {
            allItems.forEach((item) => {
                if (!item.element.classList.contains('search-hidden')) {
                    // Only apply filter if item is not hidden by search
                    const itemFilter = item.element.getAttribute('data-filter') || item.element.getAttribute('data-android-version');
                    if (itemFilter === filterValue) {
                        item.element.classList.remove('hidden');
                    } else {
                        item.element.classList.add('hidden');
                    }
                }
            });
        }

        function highlightSearchTerm(element, searchTerm) {
            const walker = document.createTreeWalker(
                element,
                NodeFilter.SHOW_TEXT,
                null,
                false
            );

            const textNodes = [];
            let node;
            while (node = walker.nextNode()) {
                if (node.nodeValue.toLowerCase().includes(searchTerm)) {
                    textNodes.push(node);
                }
            }

            textNodes.forEach(textNode => {
                const parent = textNode.parentNode;
                const text = textNode.nodeValue;
                const regex = new RegExp(`(${escapeRegExp(searchTerm)})`, 'gi');
                
                if (regex.test(text)) {
                    const highlightedHTML = text.replace(regex, '<span class="highlight">$1</span>');
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = highlightedHTML;
                    
                    while (tempDiv.firstChild) {
                        parent.insertBefore(tempDiv.firstChild, textNode);
                    }
                    parent.removeChild(textNode);
                }
            });
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // Refresh search when new content is loaded
        function refreshSearch() {
            setTimeout(() => {
                collectAllItems();
                storeOriginalHTML();
                
                // Re-run current search if there's a search term
                const currentSearch = document.getElementById('rom-search').value;
                if (currentSearch) {
                    performSearch(currentSearch.toLowerCase().trim());
                }
            }, 500);
        }

        // Call refreshSearch whenever new content is loaded
        // You can call this function from your main JavaScript file when ROMs/kernels/recoveries are loaded
        window.refreshSearch = refreshSearch;

        // Add event listeners for filter buttons to work with search
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('filter-btn')) {
                // If there's an active search, don't apply filter
                const searchInput = document.getElementById('rom-search');
                if (searchInput.value.trim()) {
                    e.preventDefault();
                    return false;
                }
                
                // Normal filter behavior when not searching
                const filterValue = e.target.getAttribute('data-filter');
                document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
                e.target.classList.add('active');
                applyFilter(filterValue);
            }
        });

        // Donation button events
        document.getElementById('upi-donate').addEventListener('click', function() {
            // Add UPI payment logic
            alert('UPI payment functionality to be implemented');
        });

        document.getElementById('coffee-donate').addEventListener('click', function() {
            // Redirect to Buy Me a Coffee page
            window.open('https://coff.ee/Mufasa01', '_blank');
        });

        document.getElementById('paypal-donate').addEventListener('click', function() {
            // Add PayPal logic
            alert('PayPal donation functionality to be implemented');
        });

        // Enhanced search with Enter key support
        document.getElementById('rom-search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                // Focus on first visible result if any
                const firstVisible = document.querySelector('.rom-card:not(.hidden), .kernel-card:not(.hidden), .recovery-card:not(.hidden)');
                if (firstVisible) {
                    firstVisible.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }
        });
    </script>
</body>
</html>
